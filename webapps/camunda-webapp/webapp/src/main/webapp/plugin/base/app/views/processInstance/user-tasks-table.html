<!-- # CE - src/main/webapp/plugin/app/base/views/processInstance/user-tasks-table.html -->
<table class="table table-bordered table-hover table-condensed">
  <thead>
    <tr>
      <th>Activity</th>
      <th>Assignee</th>
      <th>Owner</th>
      <th>Group</th>
      <th>Creation Date</th>
      <th>Due Date</th>
      <th>Priority</th>
      <th>Delegation State</th>
      <th>Task ID</th>
    </tr>
  </thead>
  <tbody>
    <tr class="task" ng-repeat="userTask in userTasks">
      <td class="activity">
        <a ng-click="selectActivity(userTask.instance.id, $event)"
           ng-href="{{ getHref(userTask) }}">{{ userTask.instance.name || userTask.instance.id }}</a>
      </td>

      <td class="assignee">
        <div ng-if="!userTask.inAssigneeEditMode">
          {{ userTask.assignee }}
          <span class="edit-toggle" ng-click="editAssignee(userTask)">
            <i class="icon-pencil"></i>
          </span>
        </div>

        <form ng-if="userTask.inAssigneeEditMode"
              class="inline-edit"
              name="editAssigneeForm"
              ng-submit="submitAssignee(this.editAssigneeForm, userTask)"
              novalidate
              request-aware>

          <fieldset>
            <input name="editAssignee"
                   type="text"
                   class="in-place-edit"
                   ng-model="getCopy(userTask.id).assignee"
                   autofocus
                   required>
          </fieldset>

          <div class="inline-edit-footer">

            <p class="invalid" ng-show="getExceptionForUserTask(userTask)">
              The assignee could not be changed: {{ getExceptionForUserTask(userTask).message }}.
            </p>

            <div class="btn-group">
              <button type="submit"
                      class="btn btn-primary"
                      ng-disabled="!isValid(this.editAssigneeForm, userTask)">
                <i class="icon-ok icon-white"></i>
              </button>
              <button type="button"
                      class="btn"
                      ng-click="closeInPlaceAssigneeEditing(userTask)">
                <i class="icon-ban-circle"></i>
              </button>
            </div>
          </div>

        </form>
      </td>

      <!-- <td class="owner">
        <div ng-if="!userTask.inOwnerEditMode">
          {{ userTask.owner }}
          <span class="edit-toggle" ng-click="editOwner(userTask)">
            <i class="icon-pencil"></i>
          </span>
        </div>

        <form ng-if="userTask.inOwnerEditMode"
              class="inline-edit"
              name="editOwnerForm"
              ng-submit="submitOwner(this.editOwnerForm, userTask)"
              novalidate
              request-aware>

          <fieldset>
            <input name="editOwner"
                   type="text"
                   class="in-place-edit"
                   ng-model="getCopy(userTask.id).owner"
                   autofocus
                   required>
          </fieldset>

          <div class="inline-edit-footer">

            <p class="invalid" ng-show="getExceptionForUserTask(userTask)">
              The owner could not be changed: {{ getExceptionForUserTask(userTask).message }}.
            </p>

            <div class="btn-group">
              <button type="submit"
                      class="btn btn-primary"
                      ng-disabled="!isValid(this.editOwnerForm, userTask)">
                <i class="icon-ok icon-white"></i>
              </button>
              <button type="button"
                      class="btn"
                      ng-click="closeInPlaceOwnerEditing(userTask)">
                <i class="icon-ban-circle"></i>
              </button>
            </div>
          </div>

        </form>
      </td> -->
      <td class="owner">
        {{ userTask.owner }}
      </td>

      <td class="group">
        <div ng-if="!userTask.inGroupEditMode">
          {{ userTask.groupId }}
          <span class="edit-toggle" ng-click="editGroup(userTask)">
            <i class="icon-pencil"></i>
          </span>
        </div>

        <form ng-if="userTask.inGroupEditMode"
              class="inline-edit"
              name="editGroupForm"
              ng-submit="submitGroup(this.editGroupForm, userTask)"
              novalidate
              request-aware>

          <fieldset>
            <input name="editGroup"
                   type="text"
                   class="in-place-edit"
                   ng-model="getCopy(userTask.id).group"
                   autofocus
                   required>
          </fieldset>

          <div class="inline-edit-footer">

            <p class="invalid" ng-show="getExceptionForUserTask(userTask)">
              The group could not be changed: {{ getExceptionForUserTask(userTask).message }}.
            </p>

            <div class="btn-group">
              <button type="submit"
                      class="btn btn-primary"
                      ng-disabled="!isValid(this.editGroupForm, userTask)">
                <i class="icon-ok icon-white"></i>
              </button>
              <button type="button"
                      class="btn"
                      ng-click="closeInPlaceGroupEditing(userTask)">
                <i class="icon-ban-circle"></i>
              </button>
            </div>
          </div>

        </form>
      </td>

      <td class="created">
        {{ userTask.created }}
      </td>
      <td class="due">
        {{ userTask.due }}
      </td>
      <td class="priority">
        {{ userTask.priority }}
      </td>
      <td class="delegation-state">
        {{ userTask.delegationState }}
      </td>
      <td class="id">
        {{ userTask.id }}
      </td>
    </tr>

    <tr ng-if="!userTasks">
      <td class="tasks-loading"
          colspan="9">
        <i class="icon-loading"></i> loading user tasks...
      </td>
    </tr>

    <tr ng-if="userTasks && !userTasks.length">
      <td class="tasks-empty"
          colspan="9">
        No user tasks
      </td>
    </tr>
  </tbody>
</table>

<div paginator total-pages="pages.total" current-page="pages.current"></div>
<!-- / CE - src/main/webapp/plugin/app/base/views/processInstance/user-tasks-table.html -->
